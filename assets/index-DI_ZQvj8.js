(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))I(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const k of i.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&I(k)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function I(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();let b=document.getElementById("startButton");b&&b.addEventListener("click",()=>{b&&(b.style.display="none",q())});let g,m=360,p=576,a,A=46,B=46,S=m/2-A/2,E=p*7/8-B,f,L,o={img:null,x:S,y:E,width:A,height:B},M=0,l=0,c=-10,x=.2,d=[],O=60,P=18,h,u,y=0,n=0,w=!1;window.onload=()=>{g=document.getElementById("board"),g.height=p,g.width=m,a=g.getContext("2d"),f=new Image,f.src="./assets/doodler-right.png",f.onload=()=>{o.img=f},f.onerror=v,L=new Image,L.src="./assets/doodler-left.png",L.onerror=v,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=v,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=v};function v(){console.error("Failed to load image.")}function q(){f.complete&&h.complete&&u.complete&&(l=c,X(),requestAnimationFrame(F),document.addEventListener("keydown",H))}function F(){if(requestAnimationFrame(F),!w){a.clearRect(0,0,g.width,g.height),o.x+=M,o.x>m?o.x=0:o.x+o.width<0&&(o.x=m),l+=x,o.y+=l,o.y>g.height&&(w=!0),a.drawImage(o.img,o.x,o.y,o.width,o.height);for(let t=0;t<d.length;t++){let e=d[t];l<0&&o.y<p*3/4&&(e.y-=c),N(o,e)&&(e.broken&&o.y+o.height<=e.y+l?w=!0:!e.broken&&l>=0&&(l=c)),a.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;d.length>0&&d[0].y>=p;)d.shift(),K();R(),a.fillStyle="black",a.font="16px sans-serif",a.fillText(y.toString(),5,20),w&&a.fillText("Opps!! Press Space to restart",m/4,p*7/8)}}function H(t){t.code==="ArrowRight"||t.code==="KeyD"?(M=4,o.img=f):t.code==="ArrowLeft"||t.code==="KeyA"?(M=-4,o.img=L):t.code==="Space"&&w&&(o={img:f,x:S,y:E,width:A,height:B},M=0,l=c,y=0,n=0,w=!1,X())}function X(){d=[];let t={img:h,x:m/2,y:p-50,width:O,height:P,broken:!1};d.push(t);let e=75;for(let s=0;s<6;s++){let I=Math.floor(Math.random()*m*3/4),r=Math.random()<.2;s===0&&(r=!1),t={img:r?u:h,x:I,y:p-e*s-150,width:O,height:P,broken:r},d.push(t),y>1e3&&(e=100),y>2e3&&(e=125),y>3e3&&(e=150)}}function K(){let t=Math.floor(Math.random()*m*3/4),e=Math.random()<.2,s={img:e?u:h,x:t,y:-P,width:O,height:P,broken:e};d.push(s)}function N(t,e){return e.broken?!1:t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function R(){let t=Math.floor(50*Math.random());l<0?(n+=t,y<n&&(y=n)):l>=0&&(n-=t),n>1e3?(x=.25,c=-6.5):n>2e3?(x=.3,c=-7):n>3e3?(x=.35,c=-7.5):n>4e3&&(x=.4,c=-8)}
