(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))w(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const x of l.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&w(x)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function w(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();let M=document.getElementById("startButton");M&&M.addEventListener("click",()=>{M&&(M.style.display="none",D())});let p,d=360,s=576,a,O=52,j=52,K=d/2-O/2,Y=s*7/8-j,m,A,k,v,L,r={img:null,x:K,y:Y,width:O,height:j},b=0,n=0,S=-8,X=.3;function c(t){const o=q(t);return o<20&&o%2===0}function q(t){return Math.floor(Math.random()*t)}let f=[],E=60,T=18,h,u,y=0,P=0,I=!1;window.onload=()=>{p=document.getElementById("board"),p.height=s,p.width=d,a=p.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{r.img=m},m.onerror=g,A=new Image,A.src="./assets/doodler-left.png",A.onerror=g,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=g,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=g,k=new Image,k.src="./assets/jet-pack.png",k.onload=()=>{},k.onerror=g,v=new Image,v.src="./assets/doodler-flying.webp",v.onload=()=>{},v.onerror=g,L=new Image,L.src="./assets/trampoline.png",L.onload=()=>{},L.onerror=g};function g(){console.error("Failed to load image.")}function D(){m.complete&&h.complete&&u.complete&&(n=S,R(),requestAnimationFrame(N),document.addEventListener("keydown",H))}function N(){if(requestAnimationFrame(N),I)return;a.clearRect(0,0,p.width,p.height),r.x+=b,r.x>d?r.x=0:r.x+r.width<0&&(r.x=d),r.y<s/4&&(r.y=s/4),n+=X,r.y+=n,r.y>p.height&&(I=!0),a.drawImage(r.img,r.x,r.y,r.width,r.height);const t=2;for(let o=0;o<f.length;o++){let e=f[o];e.jetpack?a.drawImage(k,e.x,e.y-30,e.width,e.height+10):e.trampoline?a.drawImage(L,e.x,e.y-30,e.width,e.height+20):a.drawImage(e.img,e.x,e.y,e.width,e.height),e.moveable&&(e.x+=t,e.x>d?e.x=-e.width:e.x+e.width<0&&(e.x=d)),n<0&&r.y<s-5&&(e.y-=S),C(r,e)&&(e.jetpack?(n=-10,r.img=v):e.trampoline?n=-8:e.broken&&r.y+r.height<=e.y+n?I=!0:!e.broken&&n>=0&&(n=0,setTimeout(()=>{n=S},20))),a.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;f.length>0&&f[0].y>=s;)f.shift(),W();J(),a.fillStyle="black",a.font="16px sans-serif",a.fillText(y.toString(),5,20),I&&a.fillText("Oops!! Press Space to restart",d/4,s*7/8)}function H(t){t.code==="ArrowRight"||t.code==="KeyD"?(b=4,r.img=m):t.code==="ArrowLeft"||t.code==="KeyA"?(b=-4,r.img=A):t.code==="Space"&&I&&(r={img:m,x:K,y:Y,width:O,height:j},b=0,n=S,y=0,P=0,I=!1,R())}document.addEventListener("keyup",function(t){(t.code==="ArrowRight"||t.code==="ArrowLeft"||t.code==="KeyD"||t.code==="KeyA")&&(b=0)});function R(){f=[];let t={img:h,x:d/2,y:s-50,width:E,height:T,broken:!1,moveable:!1,jetpack:!1,trampoline:!1};f.push(t);let o=70;for(let e=0;e<6;e++){let w=Math.floor(Math.random()*d*3/4),i=c(100),l=c(100),x=c(100),B=c(100);e===0&&(i=!1,l=!1,x=!1,B=!1),t={img:i?u:h,x:w,y:s-o*e-150,width:E,height:T,broken:i,moveable:l,jetpack:x,trampoline:B},f.push(t),y>1e3&&(o=100),y>2e3&&(o=125),y>3e3&&(o=150)}}function W(){let t=Math.floor(Math.random()*d*3/4),o=c(100),e=c(100),w=c(100),i=c(100),l={img:o?u:h,x:t,y:-T,width:E,height:T,broken:o,moveable:e,jetpack:w,trampoline:i};f.push(l)}function C(t,o){return o.broken?!1:t.x<o.x+o.width&&t.x+t.width>o.x&&t.y<o.y+o.height&&t.y+t.height>o.y}function J(){let t=Math.floor(50*Math.random());n<0?(P+=t,y<P&&(y=P)):n>=0&&(P-=t)}const V=.2;let F=0;window.addEventListener("deviceorientation",G);function G(t){t.beta,F=t.gamma||0,b=F*V}
