(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))y(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const w of l.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&y(w)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function y(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();let L=document.getElementById("startButton");L&&L.addEventListener("click",()=>{L&&(L.style.display="none",X())});let g,d=360,s=576,a,E=52,O=52,F=d/2-E/2,K=s*7/8-O,m,P,b,k,v,o={img:null,x:F,y:K,width:E,height:O},I=0,n=0,A=-8,R=.3,f=[],T=60,S=18,c,p,u=0,M=0,x=!1;window.onload=()=>{g=document.getElementById("board"),g.height=s,g.width=d,a=g.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{o.img=m},m.onerror=h,P=new Image,P.src="./assets/doodler-left.png",P.onerror=h,c=new Image,c.src="./assets/platform.png",c.onload=()=>{},c.onerror=h,p=new Image,p.src="./assets/platform-broken.png",p.onload=()=>{},p.onerror=h,b=new Image,b.src="./assets/jet-pack.png",b.onload=()=>{},b.onerror=h,k=new Image,k.src="./assets/doodler-flying.webp",k.onload=()=>{},k.onerror=h,v=new Image,v.src="./assets/trampoline.png",v.onload=()=>{},v.onerror=h};function h(){console.error("Failed to load image.")}function X(){m.complete&&c.complete&&p.complete&&(n=A,N(),requestAnimationFrame(Y),document.addEventListener("keydown",q))}function Y(){if(requestAnimationFrame(Y),x)return;a.clearRect(0,0,g.width,g.height),o.x+=I,o.x>d?o.x=0:o.x+o.width<0&&(o.x=d),o.y<s/4&&(o.y=s/4),n+=R,o.y+=n,o.y>g.height&&(x=!0),a.drawImage(o.img,o.x,o.y,o.width,o.height);const t=2;for(let r=0;r<f.length;r++){let e=f[r];e.jetpack?a.drawImage(b,e.x,e.y-30,e.width,e.height+10):e.trampoline?a.drawImage(v,e.x,e.y-30,e.width,e.height+20):a.drawImage(e.img,e.x,e.y,e.width,e.height),e.moveable&&(e.x+=t,e.x>d?e.x=-e.width:e.x+e.width<0&&(e.x=d)),n<0&&o.y<s-5&&(e.y-=A),H(o,e)&&(e.jetpack?(n=-10,o.img=k):e.trampoline?n=-8:e.broken&&o.y+o.height<=e.y+n?x=!0:!e.broken&&n>=0&&(n=0,setTimeout(()=>{n=A},20))),a.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;f.length>0&&f[0].y>=s;)f.shift(),D();W(),a.fillStyle="black",a.font="16px sans-serif",a.fillText(u.toString(),5,20),x&&a.fillText("Oops!! Press Space to restart",d/4,s*7/8)}function q(t){t.code==="ArrowRight"||t.code==="KeyD"?(I=4,o.img=m):t.code==="ArrowLeft"||t.code==="KeyA"?(I=-4,o.img=P):t.code==="Space"&&x&&(o={img:m,x:F,y:K,width:E,height:O},I=0,n=A,u=0,M=0,x=!1,N())}document.addEventListener("keyup",function(t){(t.code==="ArrowRight"||t.code==="ArrowLeft"||t.code==="KeyD"||t.code==="KeyA")&&(I=0)});function N(){f=[];let t={img:c,x:d/2,y:s-50,width:T,height:S,broken:!1,moveable:!1,jetpack:!1,trampoline:!1};f.push(t);let r=70;for(let e=0;e<6;e++){let y=Math.floor(Math.random()*d*3/4),i=Math.random()<.01,l=Math.random()<.01,w=Math.random()<.01,j=Math.random()<.01;e===0&&(i=!1,l=!1,w=!1,j=!1),t={img:i?p:c,x:y,y:s-r*e-150,width:T,height:S,broken:i,moveable:l,jetpack:w,trampoline:j},f.push(t),u>1e3&&(r=100),u>2e3&&(r=125),u>3e3&&(r=150)}}function D(){let t=Math.floor(Math.random()*d*3/4),r=Math.random()<.2,e=Math.random()<.2,y=Math.random()<.25,i=Math.random()<.25,l={img:r?p:c,x:t,y:-S,width:T,height:S,broken:r,moveable:e,jetpack:y,trampoline:i};f.push(l)}function H(t,r){return r.broken?!1:t.x<r.x+r.width&&t.x+t.width>r.x&&t.y<r.y+r.height&&t.y+t.height>r.y}function W(){let t=Math.floor(50*Math.random());n<0?(M+=t,u<M&&(u=M)):n>=0&&(M-=t)}const C=.2;let B=0;window.addEventListener("deviceorientation",J);function J(t){t.beta,B=t.gamma||0,I=B*C}
