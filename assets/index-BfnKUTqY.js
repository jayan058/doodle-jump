(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))w(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const S of l.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&w(S)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function w(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();let I=document.getElementById("startButton");I&&I.addEventListener("click",()=>{I&&(I.style.display="none",N())});let g,a=360,p=576,f,E=46,O=46,B=a/2-E/2,T=p*7/8-O,m,L,r={img:null,x:B,y:T,width:E,height:O},v=0,n=0,c=-10,b=.2,s=[],k=60,P=18,h,u,y=0,d=0,x=!1;window.onload=()=>{g=document.getElementById("board"),g.height=p,g.width=a,f=g.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{r.img=m},m.onerror=M,L=new Image,L.src="./assets/doodler-left.png",L.onerror=M,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=M,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=M};function M(){console.error("Failed to load image.")}function N(){m.complete&&h.complete&&u.complete&&(n=c,F(),requestAnimationFrame(Y),document.addEventListener("keydown",X))}function Y(){if(requestAnimationFrame(Y),x)return;f.clearRect(0,0,g.width,g.height),r.x+=v,r.x>a?r.x=0:r.x+r.width<0&&(r.x=a),n+=b,r.y+=n,r.y>g.height&&(x=!0),f.drawImage(r.img,r.x,r.y,r.width,r.height);const e=2;for(let o=0;o<s.length;o++){let t=s[o];t.moveable&&(t.x+=e,t.x>a?t.x=-t.width:t.x+t.width<0&&(t.x=a)),n<0&&r.y<p*3/4&&(t.y-=c),H(r,t)&&(t.broken&&r.y+r.height<=t.y+n?x=!0:!t.broken&&n>=0&&(n=c)),f.drawImage(t.img,t.x,t.y,t.width,t.height)}for(;s.length>0&&s[0].y>=p;)s.shift(),q();K(),f.fillStyle="black",f.font="16px sans-serif",f.fillText(y.toString(),5,20),x&&f.fillText("Opps!! Press Space to restart",a/4,p*7/8)}function X(e){e.code==="ArrowRight"||e.code==="KeyD"?(v=4,r.img=m):e.code==="ArrowLeft"||e.code==="KeyA"?(v=-4,r.img=L):e.code==="Space"&&x&&(r={img:m,x:B,y:T,width:E,height:O},v=0,n=c,y=0,d=0,x=!1,F())}function F(){s=[];let e={img:h,x:a/2,y:p-50,width:k,height:P,broken:!1,moveable:!1};s.push(e);let o=75;for(let t=0;t<6;t++){let w=Math.floor(Math.random()*a*3/4),i=Math.random()<.02,l=Math.random()<.1;t===0&&(i=!1,l=!1),e={img:i?u:h,x:w,y:p-o*t-150,width:k,height:P,broken:i,moveable:l},s.push(e),y>1e3&&(o=100),y>2e3&&(o=125),y>3e3&&(o=150)}}function q(){let e=Math.floor(Math.random()*a*3/4),o=Math.random()<.2,t=Math.random()<.2,w={img:o?u:h,x:e,y:-P,width:k,height:P,broken:o,moveable:t};s.push(w)}function H(e,o){return o.broken?!1:e.x<o.x+o.width&&e.x+e.width>o.x&&e.y<o.y+o.height&&e.y+e.height>o.y}function K(){let e=Math.floor(50*Math.random());n<0?(d+=e,y<d&&(y=d)):n>=0&&(d-=e),d>1e3?(b=.25,c=-6.5):d>2e3?(b=.3,c=-7):d>3e3?(b=.35,c=-7.5):d>4e3&&(b=.4,c=-8)}const R=.2;let A=0;window.addEventListener("deviceorientation",W);function W(e){e.beta,A=e.gamma||0,v=A*R}
