(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const b of l.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&e(b)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();let A=document.getElementById("startButton"),Y=document.getElementById("controls");A&&A.addEventListener("click",()=>{A&&(A.style.display="none",Y&&(Y.style.display="none"),W())});let w,d=360,f=576,a,p=!1,O=52,F=52,R=d/2-O/2,X=f*7/8-F,m,k,P,x,M,o={img:null,x:R,y:X,width:O,height:F},L=0,s=0,y=-8,E=.3;function h(t){const r=H(t);return r<20&&r%2===0}function H(t){return Math.floor(Math.random()*t)}let c=[],B=60,S=18,g,I,j=0,T=0,v=!1;window.onload=()=>{w=document.getElementById("board"),w.height=f,w.width=d,a=w.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{o.img=m},m.onerror=u,k=new Image,k.src="./assets/doodler-left.png",k.onerror=u,g=new Image,g.src="./assets/platform.png",g.onload=()=>{},g.onerror=u,I=new Image,I.src="./assets/platform-broken.png",I.onload=()=>{},I.onerror=u,P=new Image,P.src="./assets/jet-pack.png",P.onload=()=>{},P.onerror=u,x=new Image,x.src="./assets/doodler-flying.webp",x.onload=()=>{},x.onerror=u,M=new Image,M.src="./assets/trampoline.png",M.onload=()=>{},M.onerror=u};function u(){console.error("Failed to load image.")}function W(){m.complete&&g.complete&&I.complete&&(s=y,D(),requestAnimationFrame(q),document.addEventListener("keydown",C))}function q(){if(requestAnimationFrame(q),v)return;a.clearRect(0,0,w.width,w.height),o.x+=L,o.x>d?o.x=0:o.x+o.width<0&&(o.x=d),o.y<f/4&&(o.y=f/4),s+=E,o.y+=s,o.y>w.height&&(v=!0),a.drawImage(o.img,o.x,o.y,o.width,o.height);const t=2;for(let n=0;n<c.length;n++){let e=c[n];if(e.jetpack?a.drawImage(P,e.x,e.y-30,e.width,e.height+10):e.trampoline?a.drawImage(M,e.x,e.y-30,e.width,e.height+20):a.drawImage(e.img,e.x,e.y,e.width,e.height),e.moveable&&(e.x+=t,e.x>d?e.x=-e.width:e.x+e.width<0&&(e.x=d)),s<0&&o.y<f-5&&(p==!0?e.y-=y-20:e.y-=y),V(o,e))if(e.jetpack){p=!0,p==!0?E=0:E=.3,p==!0&&(o.img=x);var r=setTimeout(()=>{p=!1,E=.3,o.img=k,e.y-=y,clearTimeout(r)},2e3)}else e.trampoline?s=y:e.broken&&o.y+o.height<=e.y+s?v=!0:!e.broken&&s>=0&&(s=y);a.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;c.length>0&&c[0].y>=f;)c.shift(),J();G(),a.fillStyle="black",a.font="16px sans-serif",a.fillText(j.toString(),5,20),v&&a.fillText("Oops!! Press Space to restart",d/4,f*7/8)}function C(t){t.code==="ArrowRight"||t.code==="KeyD"?(L=4,p==!1&&(o.img=m)):t.code==="ArrowLeft"||t.code==="KeyA"?(L=-4,p==!1&&(o.img=k)):t.code==="Space"&&v&&(o={img:m,x:R,y:X,width:O,height:F},L=0,s=y,j=0,T=0,v=!1,D())}document.addEventListener("keyup",function(t){(t.code==="ArrowRight"||t.code==="ArrowLeft"||t.code==="KeyD"||t.code==="KeyA")&&(L=0)});function D(){c=[];let t={img:g,x:d/2,y:f-50,width:B,height:S,broken:!1,moveable:!1,jetpack:!1,trampoline:!1};c.push(t);let r=70;for(let n=0;n<6;n++){let e=Math.floor(Math.random()*d*3/4),i=h(100),l=h(100),b=h(100),K=h(100);n===0&&(i=!1,l=!1,b=!1,K=!1),t={img:i?I:g,x:e,y:f-r*n-150,width:B,height:S,broken:i,moveable:l,jetpack:b,trampoline:K},c.push(t)}}function J(){let t=Math.floor(Math.random()*d*3/4),r=h(100),n=h(100),e=h(100),i=h(100),l={img:r?I:g,x:t,y:-S,width:B,height:S,broken:r,moveable:n,jetpack:e,trampoline:i};c.push(l)}function V(t,r){return r.broken?!1:t.x<r.x+r.width&&t.x+t.width>r.x&&t.y<r.y+r.height&&t.y+t.height>r.y}function G(){let t=Math.floor(50*Math.random());s<0?(T+=t,j<T&&(j=T)):s>=0&&(T-=t)}const _=.2;let N=0;window.addEventListener("deviceorientation",z);function z(t){t.beta,N=t.gamma||0,L=N*_}
