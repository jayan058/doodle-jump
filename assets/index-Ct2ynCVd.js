(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))w(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const S of l.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&w(S)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function w(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();let g,a=360,p=576,f,E=46,O=46,B=a/2-E/2,T=p*7/8-O,m,L,r={img:null,x:B,y:T,width:E,height:O},b=0,n=0,c=-10,v=.2,s=[],k=60,P=18,h,u,y=0,d=0,x=!1;window.onload=()=>{g=document.getElementById("board"),g.height=p,g.width=a,f=g.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{r.img=m,Y()},m.onerror=I,L=new Image,L.src="./assets/doodler-left.png",L.onerror=I,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=I,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=I};function Y(){m.complete&&h.complete&&u.complete&&(n=c,X(),requestAnimationFrame(F),document.addEventListener("keydown",N))}function F(){if(requestAnimationFrame(F),x)return;f.clearRect(0,0,g.width,g.height),r.x+=b,r.x>a?r.x=0:r.x+r.width<0&&(r.x=a),n+=v,r.y+=n,r.y>g.height&&(x=!0),f.drawImage(r.img,r.x,r.y,r.width,r.height);const t=2;for(let o=0;o<s.length;o++){let e=s[o];e.moveable&&(e.x+=t,e.x>a?e.x=-e.width:e.x+e.width<0&&(e.x=a)),n<0&&r.y<p*3/4&&(e.y-=c),K(r,e)&&(e.broken&&r.y+r.height<=e.y+n?x=!0:!e.broken&&n>=0&&(n=c)),f.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;s.length>0&&s[0].y>=p;)s.shift(),H();R(),f.fillStyle="black",f.font="16px sans-serif",f.fillText(y.toString(),5,20),x&&f.fillText("Oops!! Press Space to restart",a/4,p*7/8)}function N(t){t.code==="ArrowRight"||t.code==="KeyD"?(b=4,r.img=m):t.code==="ArrowLeft"||t.code==="KeyA"?(b=-4,r.img=L):t.code==="Space"&&x&&q()}function q(){r={img:m,x:B,y:T,width:E,height:O},b=0,n=c,y=0,d=0,x=!1,X()}function X(){s=[];let t={img:h,x:a/2,y:p-50,width:k,height:P,broken:!1,moveable:!1};s.push(t);let o=75;for(let e=0;e<6;e++){let w=Math.floor(Math.random()*a*3/4),i=Math.random()<.02,l=Math.random()<.1;e===0&&(i=!1,l=!1),t={img:i?u:h,x:w,y:p-o*e-150,width:k,height:P,broken:i,moveable:l},s.push(t),y>1e3&&(o=100),y>2e3&&(o=125),y>3e3&&(o=150)}}function H(){let t=Math.floor(Math.random()*a*3/4),o=Math.random()<.2,e=Math.random()<.2,w={img:o?u:h,x:t,y:-P,width:k,height:P,broken:o,moveable:e};s.push(w)}function K(t,o){return o.broken?!1:t.x<o.x+o.width&&t.x+t.width>o.x&&t.y<o.y+o.height&&t.y+t.height>o.y}function R(){let t=Math.floor(50*Math.random());n<0?(d+=t,y<d&&(y=d)):n>=0&&(d-=t),d>1e3?(v=.25,c=-6.5):d>2e3?(v=.3,c=-7):d>3e3?(v=.35,c=-7.5):d>4e3&&(v=.4,c=-8)}const W=.2;let A=0;window.addEventListener("deviceorientation",C);function C(t){A=t.gamma||0,b=A*W}function I(){console.error("Failed to load image.")}let M=document.getElementById("startButton");M&&M.addEventListener("click",()=>{M&&(M.style.display="none",Y())});document.addEventListener("keydown",N);
