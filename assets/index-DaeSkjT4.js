(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))x(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const I of l.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&x(I)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function x(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();let S=document.getElementById("startButton");S&&S.addEventListener("click",()=>{S&&(S.style.display="none",H())});let p,s=360,y=576,n,j=52,A=52,Y=s/2-j/2,N=y*7/8-A,m,T,k,v,M,r={img:null,x:Y,y:N,width:j,height:A},L=0,a=0,c=-10,P=.2,f=[],O=60,E=18,h,u,w=0,d=0,b=!1;window.onload=()=>{p=document.getElementById("board"),p.height=y,p.width=s,n=p.getContext("2d"),m=new Image,m.src="./assets/doodler-right.png",m.onload=()=>{r.img=m},m.onerror=g,T=new Image,T.src="./assets/doodler-left.png",T.onerror=g,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=g,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=g,k=new Image,k.src="./assets/jet-pack.png",k.onload=()=>{},k.onerror=g,v=new Image,v.src="./assets/doodler-flying.webp",v.onload=()=>{},v.onerror=g,M=new Image,M.src="./assets/trampoline.png",M.onload=()=>{},M.onerror=g};function g(){console.error("Failed to load image.")}function H(){m.complete&&h.complete&&u.complete&&(a=c,q(),requestAnimationFrame(X),document.addEventListener("keydown",K))}function X(){if(requestAnimationFrame(X),b)return;n.clearRect(0,0,p.width,p.height),r.x+=L,r.x>s?r.x=0:r.x+r.width<0&&(r.x=s),a+=P,r.y+=a,r.y>p.height&&(b=!0),n.drawImage(r.img,r.x,r.y,r.width,r.height);const t=2;for(let o=0;o<f.length;o++){let e=f[o];e.jetpack?n.drawImage(k,e.x,e.y-30,e.width,e.height+10):e.trampoline?n.drawImage(M,e.x,e.y-30,e.width,e.height+20):n.drawImage(e.img,e.x,e.y,e.width,e.height),e.moveable&&(e.x+=t,e.x>s?e.x=-e.width:e.x+e.width<0&&(e.x=s)),a<0&&r.y<y*3/4&&(e.y-=c),W(r,e)&&(e.jetpack?(a=-10,r.img=v):e.trampoline?a=-15:e.broken&&r.y+r.height<=e.y+a?b=!0:!e.broken&&a>=0&&(a=0,setTimeout(()=>{a=c},20))),n.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;f.length>0&&f[0].y>=y;)f.shift(),R();C(),n.fillStyle="black",n.font="16px sans-serif",n.fillText(w.toString(),5,20),b&&n.fillText("Opps!! Press Space to restart",s/4,y*7/8)}function K(t){t.code==="ArrowRight"||t.code==="KeyD"?(L=4,r.img=m):t.code==="ArrowLeft"||t.code==="KeyA"?(L=-4,r.img=T):t.code==="Space"&&b&&(r={img:m,x:Y,y:N,width:j,height:A},L=0,a=c,w=0,d=0,b=!1,q())}function q(){f=[];let t={img:h,x:s/2,y:y-50,width:O,height:E,broken:!1,moveable:!1,jetpack:!1,trampoline:!1};f.push(t);let o=75;for(let e=0;e<6;e++){let x=Math.floor(Math.random()*s*3/4),i=Math.random()<.02,l=Math.random()<.1,I=Math.random()<.5,B=Math.random()<.1;e===0&&(i=!1,l=!1,I=!1,B=!1),t={img:i?u:h,x,y:y-o*e-150,width:O,height:E,broken:i,moveable:l,jetpack:I,trampoline:B},f.push(t),w>1e3&&(o=100),w>2e3&&(o=125),w>3e3&&(o=150)}}function R(){let t=Math.floor(Math.random()*s*3/4),o=Math.random()<.2,e=Math.random()<.2,x=Math.random()<.25,i=Math.random()<.25,l={img:o?u:h,x:t,y:-E,width:O,height:E,broken:o,moveable:e,jetpack:x,trampoline:i};f.push(l)}function W(t,o){return o.broken?!1:t.x<o.x+o.width&&t.x+t.width>o.x&&t.y<o.y+o.height&&t.y+t.height>o.y}function C(){let t=Math.floor(50*Math.random());a<0?(d+=t,w<d&&(w=d)):a>=0&&(d-=t),d>1e3?(P=.25,c=-6.5):d>2e3?(P=.3,c=-7):d>3e3?(P=.35,c=-7.5):d>4e3&&(P=.4,c=-8)}const D=.2;let F=0;window.addEventListener("deviceorientation",J);function J(t){t.beta,F=t.gamma||0,L=F*D}
