(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))b(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const S of i.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&b(S)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function b(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();let L=document.getElementById("startButton");L&&L.addEventListener("click",()=>{L&&(L.style.display="none",N())});let g,m=360,p=576,s,E=46,O=46,B=m/2-E/2,T=p*7/8-O,f,M,o={img:null,x:B,y:T,width:E,height:O},I=0,l=0,c=-10,x=.2,d=[],k=60,P=18,h,u,y=0,n=0,w=!1;window.onload=()=>{g=document.getElementById("board"),g.height=p,g.width=m,s=g.getContext("2d"),f=new Image,f.src="./assets/doodler-right.png",f.onload=()=>{o.img=f},f.onerror=v,M=new Image,M.src="./assets/doodler-left.png",M.onerror=v,h=new Image,h.src="./assets/platform.png",h.onload=()=>{},h.onerror=v,u=new Image,u.src="./assets/platform-broken.png",u.onload=()=>{},u.onerror=v};function v(){console.error("Failed to load image.")}function N(){f.complete&&h.complete&&u.complete&&(l=c,F(),requestAnimationFrame(Y),document.addEventListener("keydown",X))}function Y(){if(requestAnimationFrame(Y),!w){s.clearRect(0,0,g.width,g.height),o.x+=I,o.x>m?o.x=0:o.x+o.width<0&&(o.x=m),l+=x,o.y+=l,o.y>g.height&&(w=!0),s.drawImage(o.img,o.x,o.y,o.width,o.height);for(let t=0;t<d.length;t++){let e=d[t];l<0&&o.y<p*3/4&&(e.y-=c),H(o,e)&&(e.broken&&o.y+o.height<=e.y+l?w=!0:!e.broken&&l>=0&&(l=c)),s.drawImage(e.img,e.x,e.y,e.width,e.height)}for(;d.length>0&&d[0].y>=p;)d.shift(),q();K(),s.fillStyle="black",s.font="16px sans-serif",s.fillText(y.toString(),5,20),w&&s.fillText("Opps!! Press Space to restart",m/4,p*7/8)}}function X(t){t.code==="ArrowRight"||t.code==="KeyD"?(I=4,o.img=f):t.code==="ArrowLeft"||t.code==="KeyA"?(I=-4,o.img=M):t.code==="Space"&&w&&(o={img:f,x:B,y:T,width:E,height:O},I=0,l=c,y=0,n=0,w=!1,F())}function F(){d=[];let t={img:h,x:m/2,y:p-50,width:k,height:P,broken:!1};d.push(t);let e=75;for(let a=0;a<6;a++){let b=Math.floor(Math.random()*m*3/4),r=Math.random()<.1;a===0&&(r=!1),t={img:r?u:h,x:b,y:p-e*a-150,width:k,height:P,broken:r},d.push(t),y>1e3&&(e=100),y>2e3&&(e=125),y>3e3&&(e=150)}}function q(){let t=Math.floor(Math.random()*m*3/4),e=Math.random()<.2,a={img:e?u:h,x:t,y:-P,width:k,height:P,broken:e};d.push(a)}function H(t,e){return e.broken?!1:t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function K(){let t=Math.floor(50*Math.random());l<0?(n+=t,y<n&&(y=n)):l>=0&&(n-=t),n>1e3?(x=.25,c=-6.5):n>2e3?(x=.3,c=-7):n>3e3?(x=.35,c=-7.5):n>4e3&&(x=.4,c=-8)}const R=.2;let A=0;window.addEventListener("deviceorientation",W);function W(t){t.beta,A=t.gamma||0,I=A*R}
